<!DOCTYPE html>
<html>
<head>
	<title>3D Multiplayer Cubes</title>
	<link rel="icon" href="https://d1nhio0ox7pgb.cloudfront.net/_img/g_collection_png/standard/32x32/object_cube.png" type="image/x-icon" />
	<style>
		body { margin: 0; overflow: hidden; }
		canvas { display: block; }
		button {
			user-select: none;
			-webkit-user-select: none; /* Safari */
			-ms-user-select: none; /* IE/Edge */
			outline: none;
			-webkit-tap-highlight-color: transparent;
		}
		#health-bar-container {
			position: absolute;
			top: 20px;
			right: 20px;
			width: 280px;
			max-width: 90vw;
			height: 32px;
			background: rgba(1,0,0,0.4);
			z-index: 10;
			border-radius: 8px;
			box-sizing: border-box;
			pointer-events: none;
		}
		#health-bar {
			height: 100%;
			width: 100%;
			background: linear-gradient(90deg, #4caf50, #81c784);
			transition: width 0.3s;
			border-radius: 8px;
		}
	</style>
	<meta name="viewport" content="width=device-width, initial-scale=1">
</head>
<body>
	<!-- Health Bar (now at top-right of the Three.js canvas) -->
	<div id="health-bar-container">
		<div id="health-bar"></div>
	</div>

	<p>Your ID: <span id="my-id"></span></p>
	<div id="coordinates" style="
		position: absolute;
		top: 10px;
		left: 10px;
		background: rgba(0, 0, 0, 0.6);
		color: white;
		padding: 8px;
		font-family: monospace;
		border-radius: 4px;
		font-size: 14px;
		z-index: 10;
	">
		X: 0<br>
		Y: 0<br>
		Z: 0
	</div>
	<input id="peer-id-input" placeholder="Enter friend's ID" />
	<button id="connect-button">Connect</button>
	<div id="controls" style="position: fixed; bottom: 20px; left: 20px; z-index: 1000;">
		<button id="up">↑</button><br>
		<button id="left">←</button>
		<button id="down">↓</button>
		<button id="right">→</button>
	</div>

	<script src="https://unpkg.com/three@0.158.0/build/three.min.js"></script>
	<script src="https://unpkg.com/peerjs@1.5.2/dist/peerjs.min.js"></script>
	<script src="game.js"></script>
	<script>
	// Move health bar into the canvas's parent (the body) after Three.js canvas is created
	window.addEventListener("DOMContentLoaded", function() {
		const healthBar = document.getElementById("health-bar-container");
		const canvas = document.querySelector("canvas");
		if (canvas && healthBar) {
			// Make sure health bar is above the canvas and still in body
			canvas.parentNode.insertBefore(healthBar, canvas.nextSibling);
		}
	});
	</script>
</body>
</html>
